//
// Dust - Asynchronous Templating v0.6.0
// http://akdubya.github.com/dustjs
//
// Copyright (c) 2010, Aleksander Williams
// Released under the MIT License.
//
var dust={};function getGlobal(){return function(){return this.dust}.call(null)}
(function(f){function h(a,c,d){this.stack=a;this.global=c;this.blocks=d}function k(a,c,d,b){this.tail=c;this.isObject=!f.isArray(a)&&a&&"object"===typeof a;this.head=a;this.index=d;this.of=b}function l(a){this.head=new b(this);this.callback=a;this.out=""}function e(){this.head=new b(this)}function b(a,c,d){this.root=a;this.next=c;this.data="";this.flushable=!1;this.taps=d}function i(a,c){this.head=a;this.tail=c}f.cache={};f.register=function(a,c){a&&(f.cache[a]=c)};f.render=function(a,c,d){d=(new l(d)).head;
f.load(a,d,h.wrap(c)).end()};f.stream=function(a,c){var d=new e;f.nextTick(function(){f.load(a,d.head,h.wrap(c)).end()});return d};f.renderSource=function(a,c,d){return f.compileFn(a)(c,d)};f.compileFn=function(a,c){var d=f.loadSource(f.compile(a,c));return function(a,c){var b=c?new l(c):new e;f.nextTick(function(){d(b.head,h.wrap(a)).end()});return b}};f.load=function(a,c,d){var b=f.cache[a];return b?b(c,d):f.onLoad?c.map(function(c){f.onLoad(a,function(b,e){if(b)return c.setError(b);f.cache[a]||
f.loadSource(f.compile(e,a));f.cache[a](c,d).end()})}):c.setError(Error("Template Not Found: "+a))};f.loadSource=function(a){return eval(a)};f.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)};f.nextTick=function(){return"undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)}}();f.isEmpty=function(a){return f.isArray(a)&&!a.length?!0:0===a?!1:!a};f.filter=function(a,c,d){if(d)for(var b=0,e=d.length;b<e;b++){var i=d[b];"s"===
i?c=null:a=f.filters[i](a)}c&&(a=f.filters[c](a));return a};f.filters={h:function(a){return f.escapeHtml(a)},j:function(a){return f.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return!JSON?a:JSON.stringify(a)},jp:function(a){return!JSON?a:JSON.parse(a)}};f.makeBase=function(a){return new h(new k,a)};h.wrap=function(a){return a instanceof h?a:new h(new k(a))};h.prototype.get=function(a){for(var c=this.stack,d;c;){if(c.isObject&&(d=c.head[a],void 0!==d))return d;c=c.tail}return this.global?
this.global[a]:void 0};h.prototype.getPath=function(a,c){var d=this.stack,b=c.length;if(a&&0===b)return d.head;if(d.isObject){for(var d=d.head,e=0;d&&e<b;)d=d[c[e]],e++;return d}};h.prototype.push=function(a,c,d){a&&(a.$idx=c,a.$len=d);return new h(new k(a,this.stack,c,d),this.global,this.blocks)};h.prototype.rebase=function(a){return new h(new k(a),this.global,this.blocks)};h.prototype.current=function(){return this.stack.head};h.prototype.getBlock=function(a){var c=this.blocks;if(c)for(var d=c.length,
b;d--;)if(b=c[d][a])return b};h.prototype.shiftBlocks=function(a){var c=this.blocks;return a?(newBlocks=c?c.concat([a]):[a],new h(this.stack,this.global,newBlocks)):this};l.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.out+=a.data;else{a.error&&(this.callback(a.error),this.flush=function(){});return}this.head=a=a.next}this.callback(null,this.out)};e.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.emit("data",a.data);else{a.error&&(this.emit("error",
a.error),this.flush=function(){});return}this.head=a=a.next}this.emit("end")};e.prototype.emit=function(a,c){var d=this.events;if(d&&d[a])d[a](c)};e.prototype.on=function(a,c){this.events||(this.events={});this.events[a]=c;return this};b.prototype.write=function(a){var c=this.taps;c&&(a=c.go(a));this.data+=a;return this};b.prototype.end=function(a){a&&this.write(a);this.flushable=!0;this.root.flush();return this};b.prototype.map=function(a){var c=new b(this.root,this.next,this.taps),d=new b(this.root,
c,this.taps);this.next=d;this.flushable=!0;a(d);return c};b.prototype.tap=function(a){var c=this.taps;this.taps=c?c.push(a):new i(a);return this};b.prototype.untap=function(){this.taps=this.taps.tail;return this};b.prototype.render=function(a,c){return a(this,c)};b.prototype.reference=function(a,c,d,e){return"function"===typeof a&&(a=a(this,c,null,{auto:d,filters:e}),a instanceof b)?a:f.isEmpty(a)?this:this.write(f.filter(a,d,e))};b.prototype.section=function(a,c,d,e){if("function"===typeof a&&(a=
a(this,c,d,e),a instanceof b))return a;var i=d.block,d=d["else"];e&&(c=c.push(e));if(f.isArray(a)){if(i){for(var e=a.length,d=this,g=0;g<e;g++)d=i(d,c.push(a[g],g,e));return d}}else if(!0===a){if(i)return i(this,c)}else if(a||0===a){if(i)return i(this,c.push(a))}else if(d)return d(this,c);return this};b.prototype.exists=function(a,c,d){var b=d.block,d=d["else"];if(f.isEmpty(a)){if(d)return d(this,c)}else if(b)return b(this,c);return this};b.prototype.notexists=function(a,c,d){var b=d.block,d=d["else"];
if(f.isEmpty(a)){if(b)return b(this,c)}else if(d)return d(this,c);return this};b.prototype.block=function(a,c,d){d=d.block;a&&(d=a);return d?d(this,c):this};b.prototype.partial=function(a,c,d){var b=c.stack,e=b.head;d&&(c=c.rebase(b.tail),c=c.push(d),c=c.push(e));return"function"===typeof a?this.capture(a,c,function(a,b){f.load(a,b,c).end()}):f.load(a,this,c)};b.prototype.helper=function(a,c,b,e){return f.helpers[a](this,c,b,e)};b.prototype.capture=function(a,c,b){return this.map(function(e){var f=
new l(function(a,c){a?e.setError(a):b(c,e)});a(f.head,c).end()})};b.prototype.setError=function(a){this.error=a;this.root.flush();return this};i.prototype.push=function(a){return new i(a,this)};i.prototype.go=function(a){for(var c=this;c;)a=c.head(a),c=c.tail;return a};var g=RegExp(/[&<>\"\']/),j=/&/g,m=/</g,n=/>/g,o=/\"/g,p=/\'/g;f.escapeHtml=function(a){return"string"===typeof a?!g.test(a)?a:a.replace(j,"&amp;").replace(m,"&lt;").replace(n,"&gt;").replace(o,"&quot;").replace(p,"&#39;"):a};var q=
/\\/g,r=/\r/g,s=/\u2028/g,t=/\u2029/g,u=/\n/g,v=/\f/g,w=/'/g,x=/"/g,y=/\t/g;f.escapeJs=function(a){return"string"===typeof a?a.replace(q,"\\\\").replace(x,'\\"').replace(w,"\\'").replace(r,"\\r").replace(s,"\\u2028").replace(t,"\\u2029").replace(u,"\\n").replace(v,"\\f").replace(y,"\\t"):a}})(dust);"undefined"!==typeof exports&&(dust.helpers=require("./dust-helpers").helpers,"undefined"!==typeof process&&require("./server")(dust),module.exports=dust);
(function(f){function h(e){e=e.current();return typeof e==="object"&&e.isSelect===true}function k(e,b,f,g,j){var g=g||{},m;if(g.key)m=b.get(g.key);else if(h(b)){m=b.current().value;b.current().isResolved&&(j=function(){return false})}else throw"No key specified for filter and no key found in context from select statement";if(j(g.value,l(m,g.type,b))){if(h(b))b.current().isResolved=true;return e.render(f.block,b)}return f["else"]?e.render(f["else"],b):e.write("")}function l(e,b,f){if(e)switch(b||typeof e){case "number":return+e;
case "string":return""+e;case "boolean":return Boolean(e);case "date":return new Date(e);case "context":return f.get(e)}return e}f.helpers={sep:function(e,b,f){return b.stack.index===b.stack.of-1?e:f.block(e,b)},idx:function(e,b,f){return f.block(e,b.push(b.stack.index))},"if":function(e,b,f,g){if(g&&g.cond){var j=g.cond;if(typeof j==="function"){j="";e.tap(function(b){j=j+b;return""}).render(g.cond,b).untap();j===""&&(j=false)}if(eval(j))return e.render(f.block,b);if(f["else"])return e.render(f["else"],
b)}else typeof window!=="undefined"&&window.console&&window.console.log("No expression given!");return e},select:function(e,b,f,g){return e.render(f.block,b.push({isSelect:true,isResolved:false,value:b.get(g.key)}))},eq:function(e,b,f,g){return k(e,b,f,g,function(b,e){return e===b})},lt:function(e,b,f,g){return k(e,b,f,g,function(b,e){return e<b})},lte:function(e,b,f,g){return k(e,b,f,g,function(b,e){return e<=b})},gt:function(e,b,f,g){return k(e,b,f,g,function(b,e){return e>b})},gte:function(e,b,
f,g){return k(e,b,f,g,function(b,e){return e>=b})},"else":function(e,b,f,g){return k(e,b,f,g,function(){return true})}}})("undefined"!==typeof exports?exports:getGlobal());